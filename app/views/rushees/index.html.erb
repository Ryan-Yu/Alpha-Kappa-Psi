
<% provide(:title, 'Rushees') %>

<div class="account-wall-static">

  <div id="intro">

    <h1>Rushees</h1>
    <h3><%= @rushsemester %></h3>
    <br />


    <ul class="thumbnails">
      <!-- Cache for all Rushees -->
      <% cache(cache_key_for_rushees) do %>
          <% @rushees.each do |rushee| %>
              <!-- Cache for each individual Rushee -->
              <% cache (rushee) do %>
                  <!-- Only display rushees that have photographs -->
                  <% if rushee.photograph.exists? %>
                      <li>
                        <a href=<%= rushee_path(rushee.id) %> class="thumbnail">
                        <%= image_tag rushee.photograph.url(:middlesmall) %>
                        <p class="active-names"><%= rushee.name.split[0] %> <br /> <%= rushee.name.split[1..-1].join(' ') %></p>
                        </a>
                      </li>

                  <% elsif !rushee.rush_application.nil? && !rushee.rush_application.photograph.nil? && rushee.rush_application.photograph.exists? %>
                      <li>
                        <a href=<%= rushee_path(rushee.id) %> class="thumbnail">
                        <%= image_tag rushee.rush_application.photograph.url(:middlesmall) %>
                        <p class="active-names"><%= rushee.name.split[0] %> <br /> <%= rushee.name.split[1..-1].join(' ') %></p>
                        </a>
                      </li>

                  <% end %>
              <% end %>
          <% end %>
      <% end %>
    </ul>


  </div>
</div>